<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      th:fragment="layout(content)">
<head>
    <meta charset="UTF-8">
    <title>Real-estate platform</title>

    <!-- font awesome cdn link  -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">

    <!-- custom css file link  -->
    <link rel="stylesheet" href="/css/style.css">


</head>
<body>

    <!-- header section starts  -->

    <header class="header">

        <nav class="navbar nav-1">
            <section class="flex">
                <a href="/" class="logo"><i class="fas fa-house"></i>MyHome</a>
                <!-- If user is not logged in -->
                <th:block th:if="${user == null}">
                    <ul>
                        <li><a href="/signin">post property<i class="fas fa-paper-plane"></i></a></li>
                    </ul>
                </th:block>

                <!-- Check if user is logged in and has not bought a package -->
                <th:block th:if="${user != null}">
                    <th:block th:if="${user.checkStatus == false}">
                        <ul>
                            <li>
                                <a href="#" onclick="showPackageWarning()">post property<i class="fas fa-paper-plane"></i></a>
                            </li>
                        </ul>
                    </th:block>
                    <th:block th:if="${user.checkStatus == true}">
                        <ul>
                            <li>
                                <a href="/user/post_property">post property<i class="fas fa-paper-plane"></i></a>
                            </li>
                        </ul>
                    </th:block>
                </th:block>

            </section>
        </nav>

        <nav class="navbar nav-2">
            <section class="flex">
                <div id="menu-btn" class="fas fa-bars"></div>

                <div class="menu">
                    <ul>
                        <li><a href="#">Buy<i class="fas fa-angle-down"></i></a>
                            <ul>
                                <li><a href="/list_search?category=house&serviceType=sale">house</a></li>
                                <li><a href="/list_search?category=flat&serviceType=sale">flat</a></li>
                                <li><a href="/list_search?category=shop&serviceType=sale">shop</a></li>
                                <li><a href="/list_search?category=building&serviceType=sale">building</a></li>
                            </ul>
                        </li>
                        <li><a href="#">Sell<i class="fas fa-angle-down"></i></a>
                            <ul>
                                <th:block th:if="${user == null or user.email == ''}">
                                    <li><a href="#" onclick="showPackageWarning()">post property</a></li>
                                </th:block>
                                <th:block th:if="${user != null and user.email !=''}">
                                    <li><a href="/user/post_property">post property</a></li>
                                </th:block>
                            </ul>
                        </li>
                        <li><a href="#">Rent<i class="fas fa-angle-down"></i></a>
                            <ul>
                                <li><a href="/list_search?category=house&serviceType=rent">house</a></li>
                                <li><a href="/list_search?category=flat&serviceType=rent">flat</a></li>
                                <li><a href="/list_search?category=shop&serviceType=rent">shop</a></li>
                                <li><a href="/list_search?category=building&serviceType=rent">building</a></li>
                            </ul>
                        </li>
                        <li><a href="#">Status<i class="fas fa-angle-down"></i></a>
                            <ul>
                                <li><a href="/list_search?status=ready to move">Ready to move</a></li>
                                <li><a href="/list_search?status=under construction">Under construction</a></li>
                                <li><a href="/list_search?status=repairing">Under Repairing</a></li>
                            </ul>
                        </li>
                        <li><a href="#">help<i class="fas fa-angle-down"></i></a>
                            <ul>
                                <li><a href="/about">about us</a></i></li>
                                <li><a href="/contact">contact us</a></i></li>
                            </ul>
                        </li>
                        <li><a href="/service_detail">Sign up for service package <i class="fas fa-angle"></i></a>
                        <li><a href="/search">Search <i class="fas fa-angle"></i></a>
                    </ul>
                </div>

                <ul>
                    <th:block th:if="${user != null and user.email != ''}">
                        <li><a href="#">[[${user.name}]] <i class="fas fa-angle-down"></i></a>
                    </th:block>
                    <th:block th:if="${user == null or user.email == ''}">
                        <li><a href="#">Account <i class="fas fa-angle-down"></i></a>
                    </th:block>

                        <th:block th:if="${user == null}">
                            <ul>
                                <li><a href="/signin">login</a></li>
                                <li><a href="/register">register</a></li>
                            </ul>
                        </th:block>

                        <th:block th:if="${user != null}">
                            <ul>
                                <li><a href="/logout">logout</a></li>
                                <li><a href="/user/my_posts">View my post</a></li>
                                <li th:if="${user.role == 'ROLE_ADMIN'}"><a th:href="@{/admin/}">Admin</a></li>
                            </ul>
                        </th:block>

                    </li>
                </ul>
            </section>
        </nav>
    </header>

    <!-- header section ends -->

    <div th:replace="${content}"></div>

    <!-- footer section starts  -->

    <footer class="footer">

        <section class="flex">

            <div class="box">
                <a href="tel:1234567890"><i class="fas fa-phone"></i><span>123456789</span></a>
                <a href="tel:1112223333"><i class="fas fa-phone"></i><span>1112223333</span></a>
                <a href="mailto:shaikhanas@gmail.com"><i class="fas fa-envelope"></i><span>shaikhanas@gmail.com</span></a>
                <a href="#"><i class="fas fa-map-marker-alt"></i><span>mumbai, india - 400104</span></a>
            </div>

            <div class="box">
                <a href="/"><span>home</span></a>
                <a href="/about"><span>about</span></a>
                <a href="/contact"><span>contact</span></a>
                <a href="/listing"><span>all listings</span></a>
            </div>

            <div class="box">
                <a href="#"><span>facebook</span><i class="fab fa-facebook-f"></i></a>
                <a href="#"><span>twitter</span><i class="fab fa-twitter"></i></a>
                <a href="#"><span>linkedin</span><i class="fab fa-linkedin"></i></a>
                <a href="#"><span>instagram</span><i class="fab fa-instagram"></i></a>
            </div>

        </section>

        <div class="credit">&copy; copyright @ 2022 by <span>mr. web designer</span> | all rights reserved!</div>

    </footer>

    <!-- footer section ends -->

    <!-- custom js file link  -->
    <script src="/js/script.js"></script>
    <!-- JavaScript function to show a warning and redirect -->
    <script>
        function showPackageWarning() {
            alert("You must buy a service package before posting a property.");
            window.location.href = "/service_detail"; // Redirect to the service package page
        }
    </script>
</body>
</html>